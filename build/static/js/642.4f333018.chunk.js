"use strict";(self.webpackChunk_27item=self.webpackChunk_27item||[]).push([[642],{5642:function(e,t,r){r.r(t),r.d(t,{default:function(){return G}});var n=r(9439),i=r(2791),o=r(9434),c=r(8931),s=r(9482),u=r(7106),l=r(9529),d=r(6137),a=r(2532),p=r(7752),h=r(3503),m=r(3433),f=r(521),x=r(1520),j=r(7309),Z=r(482),g=r(8452),b=r(2056),w=r(1752),C=r(7575),L=r(1413),y=r(3734),v=r(3188),F=r(177),S=r(3344),k=r(184),I=y.Z.Option,O=function(e){var t=e.isShow,r=e.showDialog,i=e.addItem,o=e.productList,c=e.productColorList,s=e.productDirectionList,u=e.productLightList,l=(e.orderList,v.Z.useForm()),d=(0,n.Z)(l,1)[0];return(0,k.jsx)(g.Z,{title:"\u65b0\u589e\u8ba2\u8d27\u5355",open:t,onOk:function(){d.submit()},onCancel:function(){r(!1),d.resetFields()},children:(0,k.jsxs)(v.Z,{name:"basic",form:d,labelCol:{span:6},wrapperCol:{span:18},initialValues:{remember:!0},onFinish:function(e){i((0,L.Z)((0,L.Z)({},e),{},{date:(new Date).getTime()})),r(!1),d.resetFields()},autoComplete:"off",children:[(0,k.jsx)(v.Z.Item,{label:"\u4ea7\u54c1\u540d\u79f0",name:"productname",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4ea7\u54c1\u540d\u79f0"}],children:(0,k.jsx)(y.Z,{style:{width:"100%"},showSearch:!0,size:"middle",placeholder:"\u8bf7\u9009\u62e9\u4ea7\u54c1\u540d\u79f0",optionFilterProp:"children",onChange:function(e){var t=o.filter((function(t){return t.productname===e}))[0].productmodel;d.setFieldValue("productmodel",t)},filterOption:function(e,t){return t.children.toLowerCase().includes(e.toLowerCase())},children:o.map((function(e){return(0,k.jsx)(I,{value:e.productname,children:e.productname},e._id)}))})}),(0,k.jsx)(v.Z.Item,{label:"\u4ea7\u54c1\u578b\u53f7",name:"productmodel",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4ea7\u54c1\u578b\u53f7"}],children:(0,k.jsx)(F.Z,{})}),(0,k.jsx)(v.Z.Item,{label:"\u8868\u9762\u5904\u7406(\u989c\u8272)",name:"productcolor",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u989c\u8272"}],children:(0,k.jsx)(y.Z,{style:{width:"100%"},showSearch:!0,size:"middle",placeholder:"\u8bf7\u9009\u62e9\u989c\u8272",optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().includes(e.toLowerCase())},children:c.map((function(e){return(0,k.jsx)(I,{value:e.productcolor,children:e.productcolor},e._id)}))})}),(0,k.jsx)(v.Z.Item,{label:"\u51fa\u7ebf\u65b9\u5411",name:"productdirection",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u51fa\u7ebf\u65b9\u5411"}],children:(0,k.jsx)(y.Z,{style:{width:"100%"},showSearch:!0,size:"middle",placeholder:"\u8bf7\u9009\u62e9\u51fa\u7ebf\u65b9\u5411",optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().includes(e.toLowerCase())},children:s.map((function(e){return(0,k.jsx)(I,{value:e.productdirection,children:e.productdirection},e._id)}))})}),(0,k.jsx)(v.Z.Item,{label:"\u5149\u6e90",name:"productlight",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5149\u6e90"}],children:(0,k.jsx)(y.Z,{style:{width:"100%"},showSearch:!0,size:"middle",placeholder:"\u8bf7\u9009\u62e9\u989c\u8272",optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().includes(e.toLowerCase())},children:u.map((function(e){return(0,k.jsx)(I,{value:e.productlight,children:e.productlight},e._id)}))})}),(0,k.jsx)(v.Z.Item,{label:"\u89c4\u683c(mm)",name:"productsize",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u89c4\u683c"}],children:(0,k.jsx)(S.Z,{style:{width:"100%"},type:"number",min:1})}),(0,k.jsx)(v.Z.Item,{label:"\u6570\u91cf(\u652f)",name:"productnum",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6570\u91cf"}],children:(0,k.jsx)(S.Z,{style:{width:"100%"},min:1})}),(0,k.jsx)(v.Z.Item,{label:"\u5355\u4ef7(\u5143/\u7c73)",name:"productprice",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5355\u4ef7"}],children:(0,k.jsx)(S.Z,{style:{width:"100%"},min:.01,precision:2})})]})})},z=f.Z.Text,T=function(e){var t=e.addOrder,r=(0,o.I0)(),c=[{title:"\u5e8f\u53f7",render:function(e,t,r){return(0,k.jsx)(k.Fragment,{children:r+1})}},{title:"\u4ea7\u54c1\u540d\u79f0",dataIndex:"productname"},{title:"\u4ea7\u54c1\u578b\u53f7",dataIndex:"productmodel"},{title:"\u8868\u9762\u5904\u7406(\u989c\u8272)",dataIndex:"productcolor"},{title:"\u5149\u6e90",dataIndex:"productlight"},{title:"\u51fa\u7ebf\u65b9\u5411",dataIndex:"productdirection"},{title:"\u89c4\u683c(mm)",dataIndex:"productsize"},{title:"\u6570\u91cf(\u652f)",dataIndex:"productnum"},{title:"\u5355\u4ef7(\u5143/\u7c73)",dataIndex:"productprice"},{title:"\u91d1\u989d(\u5143)",render:function(e,t){return(0,k.jsx)(k.Fragment,{children:(Number(t.productprice)*Number(t.productnum)*Number(t.productsize)/1e3).toFixed(2)})}},{title:"\u72b6\u6001",render:function(e,t){return(0,k.jsx)(x.Z,{title:"\u4f60\u786e\u5b9a\u8981\u5220\u9664\u5417?",onConfirm:function(){Y(t.date)},onCancel:f,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:(0,k.jsx)(j.Z,{type:"primary",style:{backgroundColor:"#e2a241",border:"#edc523"},icon:(0,k.jsx)(b.Z,{}),children:"\u5220\u9664"})})}}],u=((0,o.v9)((function(e){return e.info.partaList})),(0,o.v9)((function(e){return e.info.partbList})),(0,o.v9)((function(e){return e.info.productList}))),l=(0,o.v9)((function(e){return e.info.productColorList})),d=(0,o.v9)((function(e){return e.info.productDirectionList})),a=(0,o.v9)((function(e){return e.info.productLightList})),p=(0,o.v9)((function(e){return e.info.orderList})),h=(0,i.useCallback)((function(){Object.keys(s.KK).forEach((function(e){r((0,s.kt)(s.KK[e]))}))}),[r]);(0,i.useEffect)((function(){h()}),[]);var f=function(){},L=(0,i.useState)([]),y=(0,n.Z)(L,2),v=y[0],F=y[1],S=(0,i.useState)(!1),I=(0,n.Z)(S,2),T=I[0],_=I[1],K=(0,i.useState)(!1),P=(0,n.Z)(K,2),D=P[0],q=P[1],N=function(e){_(e)},Y=function(e){var t=v.filter((function(t){return t.date!==e}));F(t)};return(0,k.jsxs)("div",{style:{maxHeight:"100%"},children:[(0,k.jsx)(Z.Z,{columns:c,dataSource:v,rowKey:function(e){return String(e.date)},bordered:!0,pagination:!1,title:function(){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(j.Z,{type:"primary",onClick:function(){N(!0)},icon:(0,k.jsx)(w.Z,{}),children:"\u65b0\u589e\u8ba2\u8d27\u5355"}),(0,k.jsx)(j.Z,{style:{marginLeft:"30px"},type:"primary",onClick:function(){q(!0)},icon:(0,k.jsx)(C.Z,{}),children:"\u751f\u6210\u8ba2\u5355"})]})},summary:function(e){return(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(Z.Z.Summary.Row,{children:[(0,k.jsx)(Z.Z.Summary.Cell,{index:0,children:"\u5408\u8ba1"}),(0,k.jsx)(Z.Z.Summary.Cell,{index:1,children:(0,k.jsx)(z,{children:v.length?v.map((function(e){return Number(e.productprice)*Number(e.productnum)*Number(e.productsize)/1e3})).reduce((function(e,t){return e+t})).toFixed(2)+"\u5143":"\u6682\u65e0"})})]})})}}),(0,k.jsx)(O,{isShow:T,showDialog:N,addItem:function(e){F([].concat((0,m.Z)(v),[e]))},productList:u,productColorList:l,productDirectionList:d,productLightList:a,orderList:p}),(0,k.jsx)(g.Z,{open:D,onOk:function(){t(v),q(!1)},onCancel:function(){q(!1)},children:(0,k.jsx)("h3",{children:"\u4f60\u786e\u5b9a\u8981\u751f\u6210\u8ba2\u5355\u5417?"})})]})},_=r(3695),K=r(3171),P=r(7892),D=r.n(P),q=y.Z.Option,N=function(e){var t=e.list,r=e.submit,o=(0,i.useState)(""),c=(0,n.Z)(o,2),s=c[0],u=c[1];return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(y.Z,{style:{width:"100%"},showSearch:!0,size:"large",placeholder:"\u8bf7\u9009\u62e9\u7532\u65b9",optionFilterProp:"children",onChange:function(e){u(e)},filterOption:function(e,t){return t.children.toLowerCase().includes(e.toLowerCase())},children:t.map((function(e){return(0,k.jsx)(q,{value:e._id,children:e.partaname},e._id)}))}),(0,k.jsx)(K.Z,{title:"\u7532\u65b9\u4fe1\u606f",bordered:!1,style:{width:"100%",marginTop:"20px"},children:function(){if(s){var e=t.filter((function(e){return e._id===s}))[0];return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("p",{children:["\u540d\u79f0:\u2003",e.partaname]}),(0,k.jsxs)("p",{children:["\u7535\u8bdd:\u2003",e.tel]}),(0,k.jsxs)("p",{children:["\u65e5\u671f:\u2003",D()(e.date).format("YYYY\u5e74MM\u6708DD\u65e5")]})]})}return(0,k.jsx)("p",{children:"\u6682\u65e0\u4fe1\u606f \u8bf7\u9009\u62e9"})}()}),(0,k.jsx)(j.Z,{type:"primary",size:"large",style:{marginTop:"20px",backgroundColor:"#68c23f",border:"#68c23f"},onClick:function(){s?r(s):_.ZP.info("\u8bf7\u5148\u9009\u62e9")},children:"\u786e\u5b9a\u7532\u65b9\u4fe1\u606f"})]})},Y=y.Z.Option,E=function(e){var t=e.list,r=e.submit,o=(0,i.useState)(""),c=(0,n.Z)(o,2),s=c[0],u=c[1];return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(y.Z,{style:{width:"100%"},showSearch:!0,size:"large",placeholder:"\u8bf7\u9009\u62e9\u4e59\u65b9",optionFilterProp:"children",onChange:function(e){u(e)},filterOption:function(e,t){return t.children.toLowerCase().includes(e.toLowerCase())},children:t.map((function(e){return(0,k.jsx)(Y,{value:e._id,children:e.partbname},e._id)}))}),(0,k.jsx)(K.Z,{title:"\u4e59\u65b9\u4fe1\u606f",bordered:!1,style:{width:"100%",marginTop:"20px"},children:function(){if(s){var e=t.filter((function(e){return e._id===s}))[0];return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("p",{children:["\u540d\u79f0:\u2003",e.partbname]}),(0,k.jsxs)("p",{children:["\u7535\u8bdd:\u2003",e.fax]})]})}return(0,k.jsx)("p",{children:"\u6682\u65e0\u4fe1\u606f \u8bf7\u9009\u62e9"})}()}),(0,k.jsx)(j.Z,{type:"primary",size:"large",style:{marginTop:"20px",backgroundColor:"#68c23f",border:"#68c23f"},onClick:function(){s?r(s):_.ZP.info("\u8bf7\u5148\u9009\u62e9")},children:"\u786e\u5b9a\u4e59\u65b9\u4fe1\u606f"})]})},H=r(7063);function M(e){var t=e.goToPrint;return(0,k.jsx)(H.ZP,{status:"success",title:"\u8ba2\u5355\u751f\u6210\u6210\u529f!",subTitle:"\u70b9\u51fb\u8df3\u8f6c\u8ba2\u5355\u786e\u8ba4\u4e66\u754c\u9762",extra:[(0,k.jsx)(j.Z,{type:"primary",size:"large",style:{width:"50%"},onClick:function(){t()},children:"\u8df3\u8f6c"},"console")]})}var V=h.Z.Step;var G=function(){var e=(0,c.k6)(),t=(0,o.I0)(),r=(0,o.v9)((function(e){return e.info.partaList})),m=(0,o.v9)((function(e){return e.info.partbList})),f=(0,i.useCallback)((function(){t((0,s.kt)(s.KK.partaList)),t((0,s.kt)(s.KK.partbList))}),[t]);(0,i.useEffect)((function(){f()}),[f]),(0,i.useEffect)((function(){var e=(new Date).getFullYear(),t=(new Date).getTime();_("".concat(e,"-27-").concat(t))}),[]);var x=(0,i.useState)(0),j=(0,n.Z)(x,2),Z=j[0],g=j[1],b=(0,i.useState)(null),w=(0,n.Z)(b,2),C=w[0],L=w[1],y=(0,i.useState)(null),v=(0,n.Z)(y,2),F=v[0],S=v[1],I=(0,i.useState)(""),O=(0,n.Z)(I,2),z=O[0],_=O[1],K=function(e){L(e),g(1)},P=function(e){S(e),g(2)},D=function(e){e=e.map((function(e){return e.orderid=z,e.partaid=C,e.partbid=F,e})),t((0,s.OG)(e,s.KK.orderList)),g(3)},q=function(){e.push({pathname:"/print",search:"id="+z})};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(h.Z,{current:Z,children:[(0,k.jsx)(V,{title:"\u9009\u62e9\u7532\u65b9",icon:0===Z?(0,k.jsx)(u.Z,{}):(0,k.jsx)(l.Z,{})}),(0,k.jsx)(V,{title:"\u9009\u62e9\u4e59\u65b9",icon:1===Z?(0,k.jsx)(u.Z,{}):(0,k.jsx)(d.Z,{})}),(0,k.jsx)(V,{title:"\u9009\u62e9\u4ea7\u54c1",icon:2===Z?(0,k.jsx)(u.Z,{}):(0,k.jsx)(a.Z,{})}),(0,k.jsx)(V,{title:"\u751f\u6210\u8ba2\u5355",icon:(0,k.jsx)(p.Z,{})})]}),(0,k.jsx)("div",{style:{maxHeight:"100%",overflow:"auto",paddingTop:"20px"},children:0===Z?(0,k.jsx)(N,{list:r,submit:K}):1===Z?(0,k.jsx)(E,{list:m,submit:P}):2===Z?(0,k.jsx)(T,{addOrder:D}):3===Z?(0,k.jsx)(M,{goToPrint:q}):void 0})]})}}}]);
//# sourceMappingURL=642.4f333018.chunk.js.map